



# 类和对象

## 静态内部类

在 Java 中，一个类可以存在于另一个类的内部，这样的类称为嵌套类。嵌套类可以分为两种：静态的和非静态的。非静态的嵌套类被称为内部类。此问题关注的是静态嵌套类，通常我们称之为静态内部类。

**静态内部类**：

静态内部类是静态成员的一种，其行为类似于静态方法。静态内部类有以下特性：

1. 静态内部类可以直接访问外部类的静态成员，包括私有成员。但不能直接访问外部类的实例成员，如果要访问，需要通过外部类的对象实例进行访问。

2. 静态内部类是独立的，就像其他的外部类一样。它们可以在不需要外部类实例的情况下创建实例，因此不能从静态内部类的对象中访问非静态的外部类对象。

3. 静态内部类的实例不会持有一个隐式引用到其外部类的实例，因此，它不会阻止其外部类实例被垃圾回收。

4. 静态内部类可以声明静态的成员，非静态内部类不能声明静态成员。

**静态内部类的作用**：

1. **封装**：静态内部类是一种很好的封装方法。如果一个类仅仅被一个特定的外部类使用，那么可以考虑将其放入这个外部类中作为静态内部类，这样可以隐藏内部类的实现细节，避免外部类的命名空间被污染。

2. **代码组织**：静态内部类使得我们的代码更加整洁和有组织，这样我们就可以把相关的类放在一起，而不是让它们散落在不同的地方。

3. **提高效率**：由于静态内部类不会持有外部类实例的隐式引用，所以它的创建和存在不会增加外部类实例的负担，这在某些情况下可以提高效率。

举个例子，假设我们有一个外部类 `Outer`，我们可以在 `Outer` 中定义一个静态内部类 `Inner`：

```java
public class Outer {
    private static String staticVar = "Static Variable";

    public static class Inner {
        public void print() {
            System.out.println(staticVar);  // 可以直接访问外部类的静态成员
        }
    }
}
```

然后我们可以像这样创建 `Inner` 的实例：

```java
Outer.Inner inner = new Outer.Inner();
inner.print();
```

## 访问器方法不能返回可变对象引用

```
访问器方法返回可变对象引用会破坏封装性
```

![image-20230424185353703](C:\Users\方锐\AppData\Roaming\Typora\typora-user-images\image-20230424185353703.png)

![image-20230424185402783](C:\Users\方锐\AppData\Roaming\Typora\typora-user-images\image-20230424185402783.png)

```
可以通过获取到的对象来更改类中的实例变量
```

![image-20230424185608438](C:\Users\方锐\AppData\Roaming\Typora\typora-user-images\image-20230424185608438.png)